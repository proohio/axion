local UILib = {
    Flags = {},
    ConfigFolder = "AxionConfig",
    SaveConfig = false
}

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")

-- Utility functions for UI styling
local function ApplyCornerRadius(instance, radius)
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, radius)
    corner.Parent = instance
end

local function ApplyStroke(instance, color, thickness)
    local stroke = Instance.new("UIStroke")
    stroke.Color = color
    stroke.Thickness = thickness
    stroke.Parent = instance
end

-- Create a container for notifications
local NotificationContainer = Instance.new("ScreenGui")
NotificationContainer.Name = "AxionNotifications"
NotificationContainer.Parent = CoreGui

-- Notification system
function UILib:MakeNotification(config)
    -- Validate config is a table
    assert(type(config) == "table", "MakeNotification requires a configuration table")
    
    -- Extract configuration
    local title = config.Title or "Notification"
    local content = config.Content or ""
    local image = config.Image or ""
    local duration = config.Time or 5
    
    -- Create notification frame
    local NotificationFrame = Instance.new("Frame")
    NotificationFrame.Size = UDim2.new(0, 250, 0, 80)
    NotificationFrame.Position = UDim2.new(1, 0, 1, -90) -- Start off screen
    NotificationFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    NotificationFrame.BorderSizePixel = 0
    ApplyCornerRadius(NotificationFrame, 6)
    
    -- Add icon if provided
    if image ~= "" then
        local Icon = Instance.new("ImageLabel")
        Icon.Size = UDim2.new(0, 20, 0, 20)
        Icon.Position = UDim2.new(0, 10, 0, 8)
        Icon.BackgroundTransparency = 1
        Icon.Image = image
        Icon.Parent = NotificationFrame
        
        -- Adjust title position if icon is present
        Title.Position = UDim2.new(0, 40, 0, 5)
    end
    
    -- Add title
    local Title = Instance.new("TextLabel")
    Title.Text = title
    Title.Size = UDim2.new(1, image ~= "" and -50 or -20, 0, 25)
    Title.Position = UDim2.new(0, image ~= "" and 40 or 10, 0, 5)
    Title.Font = Enum.Font.GothamBold
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextSize = 14
    Title.TextXAlignment = Enum.TextXAlignment.Left
    Title.BackgroundTransparency = 1
    Title.Parent = NotificationFrame
    
    -- Add description
    local Description = Instance.new("TextLabel")
    Description.Text = content
    Description.Size = UDim2.new(1, -20, 0, 40)
    Description.Position = UDim2.new(0, 10, 0, 30)
    Description.Font = Enum.Font.Gotham
    Description.TextColor3 = Color3.fromRGB(200, 200, 200)
    Description.TextSize = 14
    Description.TextXAlignment = Enum.TextXAlignment.Left
    Description.TextWrapped = true
    Description.BackgroundTransparency = 1
    Description.Parent = NotificationFrame
    
    -- Create container for notifications if it doesn't exist
    if not game.CoreGui:FindFirstChild("AxionNotifications") then
        local NotificationContainer = Instance.new("ScreenGui")
        NotificationContainer.Name = "AxionNotifications"
        NotificationContainer.Parent = game.CoreGui
    end
    
    -- Parent to container
    NotificationFrame.Parent = game.CoreGui.AxionNotifications
    
    -- Slide in animation
    TweenService:Create(NotificationFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {
        Position = UDim2.new(1, -260, 1, -90)
    }):Play()
    
    -- Wait for duration then slide out
    task.delay(duration, function()
        local slideTween = TweenService:Create(NotificationFrame, TweenInfo.new(0.5, Enum.EasingStyle.Quart), {
            Position = UDim2.new(1, 0, 1, -90)
        })
        
        slideTween.Completed:Connect(function()
            NotificationFrame:Destroy()
        end)
        
        slideTween:Play()
    end)
end

function UILib:MakeWindow(config)
    self.SaveConfig = config.SaveConfig or false
    self.ConfigFolder = config.ConfigFolder or "AxionConfig"
    
    -- Create config folder if saving is enabled
    if self.SaveConfig then
        if not isfolder(self.ConfigFolder) then
            makefolder(self.ConfigFolder)
        end
    end
    
    -- Validate config is a table
    assert(type(config) == "table", "MakeWindow requires a configuration table")
    
    -- Extract configuration or set defaults
    local title = config.Name or "Axion UI"
    local hidePremium = config.HidePremium or false
    local saveConfig = config.SaveConfig or false
    local configFolder = config.ConfigFolder or "AxionConfig"
    local introEnabled = config.IntroEnabled or false
    local introText = config.IntroText or title
    local introIcon = config.IntroIcon or ""
    local icon = config.Icon or ""
    local closeCallback = config.CloseCallback or function() end
    
    local Window = {}
    
    -- Create main GUI elements
    local ScreenGui = Instance.new("ScreenGui")
    local MainFrame = Instance.new("Frame")
    local TopBar = Instance.new("Frame")
    local Title = Instance.new("TextLabel")
    
    -- Set up GUI hierarchy
    ScreenGui.Name = "AxionUI"
    ScreenGui.Parent = CoreGui
    
    -- Handle intro animation if enabled
    if introEnabled then
        local IntroGui = Instance.new("ScreenGui")
        IntroGui.Parent = CoreGui
        
        local IntroFrame = Instance.new("Frame")
        IntroFrame.Size = UDim2.new(0, 300, 0, 200)
        IntroFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
        IntroFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
        IntroFrame.BorderSizePixel = 0
        IntroFrame.Parent = IntroGui
        ApplyCornerRadius(IntroFrame, 8)
        
        -- Add intro icon if provided
        if introIcon ~= "" then
            local Icon = Instance.new("ImageLabel")
            Icon.Size = UDim2.new(0, 100, 0, 100)
            Icon.Position = UDim2.new(0.5, -50, 0.3, -50)
            Icon.BackgroundTransparency = 1
            Icon.Image = introIcon
            Icon.Parent = IntroFrame
        end
        
        -- Add intro text
        local IntroLabel = Instance.new("TextLabel")
        IntroLabel.Size = UDim2.new(1, 0, 0, 40)
        IntroLabel.Position = UDim2.new(0, 0, 0.7, 0)
        IntroLabel.BackgroundTransparency = 1
        IntroLabel.Text = introText
        IntroLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        IntroLabel.TextSize = 18
        IntroLabel.Font = Enum.Font.GothamBold
        IntroLabel.Parent = IntroFrame
        
        -- Animate intro
        IntroFrame.BackgroundTransparency = 1
        IntroLabel.TextTransparency = 1
        
        TweenService:Create(IntroFrame, TweenInfo.new(0.5), {
            BackgroundTransparency = 0
        }):Play()
        
        TweenService:Create(IntroLabel, TweenInfo.new(0.5), {
            TextTransparency = 0
        }):Play()
        
        -- Wait and fade out
        task.delay(2, function()
            local fadeOut = TweenService:Create(IntroFrame, TweenInfo.new(0.5), {
                BackgroundTransparency = 1
            })
            
            TweenService:Create(IntroLabel, TweenInfo.new(0.5), {
                TextTransparency = 1
            }):Play()
            
            fadeOut.Completed:Connect(function()
                IntroGui:Destroy()
                ScreenGui.Enabled = true
            end)
            
            fadeOut:Play()
        end)
        
        ScreenGui.Enabled = false
    end
    
    MainFrame.Name = "MainFrame"
    MainFrame.Parent = ScreenGui
    MainFrame.Size = UDim2.new(0, 450, 0, 350)
    MainFrame.Position = UDim2.new(0.5, -225, 0.5, -175)
    MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    MainFrame.BorderSizePixel = 0
    ApplyCornerRadius(MainFrame, 8)
    
    -- Add window icon if provided
    if icon ~= "" then
        local WindowIcon = Instance.new("ImageLabel")
        WindowIcon.Size = UDim2.new(0, 20, 0, 20)
        WindowIcon.Position = UDim2.new(0, 8, 0, 8)
        WindowIcon.BackgroundTransparency = 1
        WindowIcon.Image = icon
        WindowIcon.Parent = TopBar
        
        -- Adjust title position if icon is present
        Title.Position = UDim2.new(0, 35, 0, 0)
    end
    
    -- Style top bar
    TopBar.Name = "TopBar"
    TopBar.Parent = MainFrame
    TopBar.Size = UDim2.new(1, 0, 0, 35)
    TopBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    TopBar.BorderSizePixel = 0
    ApplyCornerRadius(TopBar, 8)
    
    Title.Name = "Title"
    Title.Parent = TopBar
    Title.Size = UDim2.new(1, -40, 1, 0)
    Title.Position = UDim2.new(0, 15, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = title
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.TextSize = 16
    Title.Font = Enum.Font.GothamBold
    Title.TextXAlignment = Enum.TextXAlignment.Left

    -- Create TabContainer properly
    local TabContainer = Instance.new("Frame")
    TabContainer.Name = "TabContainer"
    TabContainer.Size = UDim2.new(1, -20, 1, -60)  -- Adjust size as needed
    TabContainer.Position = UDim2.new(0, 10, 0, 50) -- Position below TopBar
    TabContainer.BackgroundTransparency = 1
    TabContainer.Parent = MainFrame  -- Make sure to parent it to MainFrame
    
    -- Add UIListLayout to TabContainer
    local TabList = Instance.new("UIListLayout")
    TabList.Parent = TabContainer
    TabList.SortOrder = Enum.SortOrder.LayoutOrder
    TabList.Padding = UDim.new(0, 5)

    -- Add content container
    local ContentContainer = Instance.new("ScrollingFrame")
    ContentContainer.Name = "ContentContainer"
    ContentContainer.Parent = MainFrame
    ContentContainer.Size = UDim2.new(1, -140, 1, -45)
    ContentContainer.Position = UDim2.new(0, 130, 0, 40)
    ContentContainer.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    ContentContainer.BorderSizePixel = 0
    ApplyCornerRadius(ContentContainer, 6)

    -- Dragging functionality
    local dragging
    local dragInput
    local dragStart
    local startPos
    
    local function update(input)
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
    
    TopBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    TopBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    
    game:GetService("UserInputService").InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)

    -- Add minimize/close buttons
    local MinimizeButton = Instance.new("TextButton")
    MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
    MinimizeButton.Position = UDim2.new(1, -60, 0, 2)
    MinimizeButton.BackgroundTransparency = 1
    MinimizeButton.Text = "-"
    MinimizeButton.TextSize = 20
    MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    MinimizeButton.Font = Enum.Font.GothamBold
    MinimizeButton.Parent = TopBar

    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -30, 0, 2)
    CloseButton.BackgroundTransparency = 1
    CloseButton.Text = "×"
    CloseButton.TextSize = 20
    CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseButton.Font = Enum.Font.GothamBold
    CloseButton.Parent = TopBar

    -- Add button functionality
    local minimized = false
    MinimizeButton.MouseButton1Click:Connect(function()
        minimized = not minimized
        
        -- Create tweens for both size and content visibility
        TweenService:Create(MainFrame, TweenInfo.new(0.5), {
            Size = minimized and UDim2.new(0, 450, 0, 35) or UDim2.new(0, 450, 0, 350)
        }):Play()
        
        -- Hide/Show content containers
        TabContainer.Visible = not minimized
        ContentContainer.Visible = not minimized
    end)
    
    CloseButton.MouseButton1Click:Connect(function()
        closeCallback()
        ScreenGui:Destroy()
    end)

    -- Tab system
    local tabs = {}
    local currentTab = nil

    function Window:MakeTab(config)
        -- Extract configuration or set defaults
        local name = (type(config) == "table" and config.Name) or config or "New Tab"
        local icon = (type(config) == "table" and config.Icon) or ""
        local premiumOnly = (type(config) == "table" and config.PremiumOnly) or false
        
        local Tab = {}
        
        -- Create tab button
        local TabButton = Instance.new("TextButton")
        TabButton.Name = name.."Tab"
        TabButton.Parent = TabContainer
        TabButton.Size = UDim2.new(0, 100, 0, 30)
        TabButton.Position = UDim2.new(0, 5, 0, #tabs * 40 + 5)
        TabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.TextSize = 14
        TabButton.Font = Enum.Font.GothamSemibold
        ApplyCornerRadius(TabButton, 6)
        
        -- Add icon if provided
        if icon ~= "" then
            local Icon = Instance.new("ImageLabel")
            Icon.Size = UDim2.new(0, 20, 0, 20)
            Icon.Position = UDim2.new(0, 8, 0.5, -10)
            Icon.BackgroundTransparency = 1
            Icon.Image = icon
            Icon.Parent = TabButton
            
            -- Adjust text position to account for icon
            TabButton.Text = name
            TabButton.TextXAlignment = Enum.TextXAlignment.Right
        else
            TabButton.Text = name
            TabButton.TextXAlignment = Enum.TextXAlignment.Center
        end
        
        -- Create UIPadding for the Tab
        local TabPadding = Instance.new("UIPadding")
        TabPadding.PaddingLeft = UDim.new(0, 10)  -- Adjust padding values as needed
        TabPadding.PaddingRight = UDim.new(0, 10)
        TabPadding.Parent = TabButton
        
        -- Create tab content container
        local TabContent = Instance.new("ScrollingFrame")
        TabContent.Name = name.."Content"
        TabContent.Parent = ContentContainer
        TabContent.Size = UDim2.new(1, -20, 1, -20)
        TabContent.Position = UDim2.new(0, 10, 0, 10)
        TabContent.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        TabContent.BackgroundTransparency = 0.5
        TabContent.ScrollBarThickness = 2
        TabContent.ScrollBarImageColor3 = Color3.fromRGB(100, 100, 100)
        TabContent.Visible = false
        TabContent.AutomaticCanvasSize = Enum.AutomaticSize.Y
        TabContent.CanvasSize = UDim2.new(0, 0, 0, 0)
        
        -- Add list layout to tab content
        local UIListLayout = Instance.new("UIListLayout")
        UIListLayout.Parent = TabContent
        UIListLayout.Padding = UDim.new(0, 8)
        UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
        
        -- Add padding
        local UIPadding = Instance.new("UIPadding")
        UIPadding.Parent = TabContent
        UIPadding.PaddingTop = UDim.new(0, 10)
        UIPadding.PaddingBottom = UDim.new(0, 10)
        UIPadding.PaddingLeft = UDim.new(0, 10)
        UIPadding.PaddingRight = UDim.new(0, 10)
        
        -- Tab button click handler
        TabButton.MouseButton1Click:Connect(function()
            if currentTab then
                currentTab.Content.Visible = false
                TweenService:Create(currentTab.Button, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                }):Play()
            end
            
            currentTab = {Button = TabButton, Content = TabContent}
            TabContent.Visible = true
            TweenService:Create(TabButton, TweenInfo.new(0.2), {
                BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            }):Play()
        end)
        
        -- If this is the first tab, manually set it as current
        if #tabs == 0 then
            currentTab = {Button = TabButton, Content = TabContent}
            TabContent.Visible = true
            TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        end
        
        -- Add section functionality
        function Tab:AddSection(config)
            -- Validate config is a table
            assert(type(config) == "table", "AddSection requires a configuration table")
            
            -- Extract configuration
            local name = config.Name or "New Section"
            
            local Section = {}
            
            -- Create section frame
            local SectionFrame = Instance.new("Frame")
            local SectionLabel = Instance.new("TextLabel")
            local SectionContent = Instance.new("Frame")
            local UIListLayout = Instance.new("UIListLayout")
            
            -- Main section frame
            SectionFrame.Name = name.."Section"
            SectionFrame.Size = UDim2.new(1, -20, 0, 35) -- Will auto-adjust based on content
            SectionFrame.BackgroundTransparency = 1
            SectionFrame.Parent = TabContent
            
            -- Section label
            SectionLabel.Name = "Label"
            SectionLabel.Size = UDim2.new(1, 0, 0, 25)
            SectionLabel.BackgroundTransparency = 1
            SectionLabel.Text = name
            SectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            SectionLabel.TextSize = 14
            SectionLabel.Font = Enum.Font.GothamBold
            SectionLabel.Parent = SectionFrame
            
            -- Content container
            SectionContent.Name = "Content"
            SectionContent.Size = UDim2.new(1, 0, 0, 0)
            SectionContent.Position = UDim2.new(0, 0, 0, 25)
            SectionContent.BackgroundTransparency = 1
            SectionContent.Parent = SectionFrame
            
            -- Layout for content
            UIListLayout.Parent = SectionContent
            UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
            UIListLayout.Padding = UDim.new(0, 5)
            
            -- Auto-size handler
            UIListLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
                SectionContent.Size = UDim2.new(1, 0, 0, UIListLayout.AbsoluteContentSize.Y)
                SectionFrame.Size = UDim2.new(1, -20, 0, UIListLayout.AbsoluteContentSize.Y + 30)
            end)
            
            -- Add element functions to section
            function Section:AddButton(config)
                local Button = Tab:AddButton(config)
                Button.Parent = SectionContent
                return Button
            end
            
            function Section:AddToggle(config)
                local Toggle = Tab:AddToggle(config)
                Toggle.Parent = SectionContent
                return Toggle
            end
            
            function Section:AddSlider(config)
                local Slider = Tab:AddSlider(config)
                Slider.Parent = SectionContent
                return Slider
            end
            
            function Section:AddDropdown(config)
                local Dropdown = Tab:AddDropdown(config)
                Dropdown.Parent = SectionContent
                return Dropdown
            end
            
            function Section:AddBind(config)
                local Keybind = Tab:AddBind(config)
                Keybind.Parent = SectionContent
                return Keybind
            end
            
            function Section:AddColorpicker(config)
                local Colorpicker = Tab:AddColorpicker(config)
                Colorpicker.Parent = SectionContent
                return Colorpicker
            end
            
            function Section:AddLabel(config)
                local Label = Tab:AddLabel(config)
                Label.Parent = SectionContent
                return Label
            end
            
            return Section
        end
        
        -- Add elements to tab
        function Tab:AddButton(config)
            -- Validate config is a table
            assert(type(config) == "table", "AddButton requires a configuration table")
            
            -- Extract configuration
            local name = config.Name or "Button"
            local callback = config.Callback or function() end
            
            -- Create button elements
            local ButtonFrame = Instance.new("Frame")
            local Button = Instance.new("TextButton")
            local ButtonRipple = Instance.new("Frame")
            
            ButtonFrame.Name = name.."_Button"
            ButtonFrame.Size = UDim2.new(1, -20, 0, 35)
            ButtonFrame.BackgroundTransparency = 1
            
            Button.Name = "Button"
            Button.Parent = ButtonFrame
            Button.Size = UDim2.new(1, 0, 1, 0)
            Button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            Button.BorderSizePixel = 0
            Button.Text = name
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.TextSize = 14
            Button.Font = Enum.Font.Gotham
            ApplyCornerRadius(Button, 6)
            
            -- Button effects
            local Hovering = false
            
            Button.MouseEnter:Connect(function()
                Hovering = true
                TweenService:Create(Button, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
            end)
            
            Button.MouseLeave:Connect(function()
                Hovering = false
                TweenService:Create(Button, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                }):Play()
            end)
            
            Button.MouseButton1Down:Connect(function()
                TweenService:Create(Button, TweenInfo.new(0.1), {
                    BackgroundColor3 = Color3.fromRGB(60, 60, 60)
                }):Play()
                
                -- Create ripple effect
                local Ripple = Instance.new("Frame")
                Ripple.Name = "Ripple"
                Ripple.Parent = Button
                Ripple.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
                Ripple.BackgroundTransparency = 0.8
                Ripple.BorderSizePixel = 0
                Ripple.Position = UDim2.new(0, 0, 0, 0)
                Ripple.Size = UDim2.new(0, 0, 0, 0)
                ApplyCornerRadius(Ripple, 6)
                
                local RippleTween = TweenService:Create(Ripple, TweenInfo.new(0.5), {
                    Size = UDim2.new(1, 0, 1, 0),
                    BackgroundTransparency = 1
                })
                
                RippleTween.Completed:Connect(function()
                    Ripple:Destroy()
                end)
                
                RippleTween:Play()
            end)
            
            Button.MouseButton1Up:Connect(function()
                if Hovering then
                    TweenService:Create(Button, TweenInfo.new(0.1), {
                        BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                    }):Play()
                else
                    TweenService:Create(Button, TweenInfo.new(0.1), {
                        BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                    }):Play()
                end
            end)
            
            -- Connect callback
            Button.MouseButton1Click:Connect(function()
                callback()
            end)
            
            return ButtonFrame
        end
        
        function Tab:AddToggle(config)
            -- Extract flag configuration
            local flag = config.Flag
            local save = config.Save
            
            -- Create toggle object
            local ToggleObject = {
                Value = config.Default or false,
                Save = save,
                Flag = flag
            }
            
            -- Register flag if provided
            if flag then
                UILib.Flags[flag] = ToggleObject
            end
            
            -- Set method
            function ToggleObject:Set(value)
                self.Value = value
                -- [Previous toggle update code...]
                
                -- Save config if enabled
                if self.Save and UILib.SaveConfig then
                    UILib:SaveConfiguration()
                end
            end
            
            return ToggleObject
        end
        
        function Tab:AddSlider(config)
            -- Validate config is a table
            assert(type(config) == "table", "AddSlider requires a configuration table")
            
            -- Extract configuration
            local name = config.Name or "Slider"
            local min = config.Min or 0
            local max = config.Max or 100
            local default = math.clamp(config.Default or min, min, max)
            local color = config.Color or Color3.fromRGB(255, 255, 255)
            local increment = config.Increment or 1
            local valueName = config.ValueName or ""
            local callback = config.Callback or function() end
            
            -- Create slider elements
            local SliderFrame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local ValueLabel = Instance.new("TextLabel")
            local SliderBackground = Instance.new("Frame")
            local SliderFill = Instance.new("Frame")
            local SliderButton = Instance.new("TextButton")
            
            -- Setup main frame
            SliderFrame.Name = name.."_Slider"
            SliderFrame.Size = UDim2.new(1, -20, 0, 50)
            SliderFrame.BackgroundTransparency = 1
            
            -- Label
            Label.Name = "Label"
            Label.Size = UDim2.new(1, 0, 0, 20)
            Label.BackgroundTransparency = 1
            Label.Text = name
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 14
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = SliderFrame
            
            -- Value label
            ValueLabel.Name = "ValueLabel"
            ValueLabel.Size = UDim2.new(1, 0, 0, 20)
            ValueLabel.Position = UDim2.new(0, 0, 0, 30)
            ValueLabel.BackgroundTransparency = 1
            ValueLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            ValueLabel.TextSize = 14
            ValueLabel.Font = Enum.Font.Gotham
            ValueLabel.TextXAlignment = Enum.TextXAlignment.Right
            ValueLabel.Parent = SliderFrame
            
            -- Slider background
            SliderBackground.Name = "Background"
            SliderBackground.Size = UDim2.new(1, 0, 0, 6)
            SliderBackground.Position = UDim2.new(0, 0, 0, 25)
            SliderBackground.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            SliderBackground.Parent = SliderFrame
            ApplyCornerRadius(SliderBackground, 3)
            
            -- Slider fill
            SliderFill.Name = "Fill"
            SliderFill.Size = UDim2.new(0, 0, 1, 0)
            SliderFill.BackgroundColor3 = color
            SliderFill.Parent = SliderBackground
            ApplyCornerRadius(SliderFill, 3)
            
            -- Slider button
            SliderButton.Name = "SliderButton"
            SliderButton.Size = UDim2.new(1, 0, 1, 0)
            SliderButton.BackgroundTransparency = 1
            SliderButton.Text = ""
            SliderButton.Parent = SliderBackground
            
            -- Create slider object
            local Slider = {}
            local Dragging = false
            local CurrentValue = config.Default or config.Min
            
            -- Set method for the Slider
            function Slider:Set(value)
                -- Validate input is a number
                assert(type(value) == "number", "Slider:Set() requires a number value")
                
                -- Clamp value between min and max
                value = math.clamp(value, config.Min, config.Max)
                
                -- Round to increment
                value = math.floor(value / config.Increment + 0.5) * config.Increment
                
                -- Update stored value
                CurrentValue = value
                
                -- Update visual elements
                local percent = (value - config.Min) / (config.Max - config.Min)
                SliderFill.Size = UDim2.new(percent, 0, 1, 0)
                ValueLabel.Text = string.format("%.0f %s", value, config.ValueName)
                
                -- Call callback
                config.Callback(value)
                
                return value
            end
            
            -- Slider interaction
            SliderButton.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    Dragging = true
                end
            end)
            
            SliderButton.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    Dragging = false
                end
            end)
            
            -- Update slider based on input
            game:GetService("UserInputService").InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement and Dragging then
                    local SliderAbsolute = SliderBackground.AbsolutePosition
                    local SliderAbsoluteSize = SliderBackground.AbsoluteSize
                    
                    local percent = math.clamp((input.Position.X - SliderAbsolute.X) / SliderAbsoluteSize.X, 0, 1)
                    local value = config.Min + (config.Max - config.Min) * percent
                    
                    Slider:Set(value)
                end
            end)
            
            -- Set initial value
            Slider:Set(default)
            
            return Slider
        end
        
        function Tab:AddDropdown(config)
            assert(type(config) == "table", "AddDropdown requires a configuration table")
            
            config = config or {}
            config.Name = config.Name or "Dropdown"
            config.Default = config.Default or ""
            config.Options = config.Options or {}
            config.Callback = config.Callback or function() end
            config.Flag = config.Flag or nil

            -- Create main dropdown container
            local DropdownFrame = Instance.new("Frame")
            DropdownFrame.Size = UDim2.new(1, 0, 0, 32)
            DropdownFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
            DropdownFrame.BorderSizePixel = 0
            ApplyCornerRadius(DropdownFrame, 4)

            -- Create dropdown button
            local DropdownButton = Instance.new("TextButton")
            DropdownButton.Size = UDim2.new(1, 0, 1, 0)
            DropdownButton.BackgroundTransparency = 1
            DropdownButton.Text = config.Name .. ": " .. config.Default
            DropdownButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            DropdownButton.TextSize = 14
            DropdownButton.Font = Enum.Font.GothamSemibold
            DropdownButton.Parent = DropdownFrame

            -- Create options container
            local OptionsFrame = Instance.new("Frame")
            OptionsFrame.Size = UDim2.new(1, 0, 0, #config.Options * 25)
            OptionsFrame.Position = UDim2.new(0, 0, 1, 0)
            OptionsFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            OptionsFrame.BorderSizePixel = 0
            OptionsFrame.Visible = false
            OptionsFrame.ZIndex = 10
            OptionsFrame.Parent = DropdownFrame
            ApplyCornerRadius(OptionsFrame, 4)

            -- Add list layout for options
            local OptionsList = Instance.new("UIListLayout")
            OptionsList.Parent = OptionsFrame

            -- Create option buttons
            for _, option in ipairs(config.Options) do
                local OptionButton = Instance.new("TextButton")
                OptionButton.Size = UDim2.new(1, 0, 0, 25)
                OptionButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
                OptionButton.BorderSizePixel = 0
                OptionButton.Text = tostring(option)
                OptionButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                OptionButton.TextSize = 14
                OptionButton.Font = Enum.Font.GothamSemibold
                OptionButton.ZIndex = 11
                OptionButton.Parent = OptionsFrame
                
                OptionButton.MouseButton1Click:Connect(function()
                    DropdownButton.Text = config.Name .. ": " .. option
                    OptionsFrame.Visible = false
                    config.Callback(option)
                    
                    if config.Flag then
                        self.Flags[config.Flag] = option
                    end
                end)
            end

            -- Toggle dropdown visibility
            DropdownButton.MouseButton1Click:Connect(function()
                OptionsFrame.Visible = not OptionsFrame.Visible
            end)

            return DropdownFrame
        end
        
        function Tab:AddBind(config)
            -- Validate config is a table
            assert(type(config) == "table", "AddBind requires a configuration table")
            
            -- Extract configuration
            local name = config.Name or "Keybind"
            local default = config.Default or Enum.KeyCode.E
            local hold = config.Hold or false
            local callback = config.Callback or function() end
            
            -- Create bind elements
            local BindFrame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local BindButton = Instance.new("TextButton")
            
            -- Setup main frame
            BindFrame.Name = name.."_Bind"
            BindFrame.Size = UDim2.new(1, -20, 0, 35)
            BindFrame.BackgroundTransparency = 1
            
            -- Setup label
            Label.Name = "Label"
            Label.Size = UDim2.new(1, -80, 1, 0)
            Label.BackgroundTransparency = 1
            Label.Text = name
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 14
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = BindFrame
            
            -- Setup bind button
            BindButton.Name = "BindButton"
            BindButton.Size = UDim2.new(0, 70, 0, 25)
            BindButton.Position = UDim2.new(1, -70, 0.5, -12)
            BindButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            BindButton.Text = default.Name
            BindButton.TextColor3 = Color3.fromRGB(255, 255, 255)
            BindButton.TextSize = 12
            BindButton.Font = Enum.Font.Gotham
            BindButton.Parent = BindFrame
            ApplyCornerRadius(BindButton, 4)
            
            -- Create bind object
            local BindObject = {}
            local CurrentBind = default
            local Binding = false
            local Holding = false
            
            -- Set method for the bind
            function BindObject:Set(newBind)
                -- Validate input is a KeyCode
                assert(typeof(newBind) == "EnumItem" and newBind.EnumType == Enum.KeyCode, 
                    "Bind:Set() requires a KeyCode EnumItem")
                
                -- Update current bind
                CurrentBind = newBind
                
                -- Update visual display
                BindButton.Text = newBind.Name
                
                return newBind
            end
            
            -- Get method for the bind
            function BindObject:Get()
                return CurrentBind
            end
            
            -- Handle binding
            BindButton.MouseButton1Click:Connect(function()
                if Binding then return end
                
                Binding = true
                BindButton.Text = "..."
                
                local input = game:GetService("UserInputService").InputBegan:Wait()
                
                if input.UserInputType == Enum.UserInputType.Keyboard then
                    BindObject:Set(input.KeyCode)
                end
                
                Binding = false
            end)
            
            -- Handle input
            game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
                if gameProcessed then return end
                if Binding then return end
                
                if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == CurrentBind then
                    if hold then
                        Holding = true
                        while Holding do
                            callback(true)
                            task.wait()
                        end
                    else
                        callback()
                    end
                end
            end)
            
            if hold then
                game:GetService("UserInputService").InputEnded:Connect(function(input, gameProcessed)
                    if gameProcessed then return end
                    if input.UserInputType == Enum.UserInputType.Keyboard and input.KeyCode == CurrentBind then
                        Holding = false
                        callback(false)
                    end
                end)
            end
            
            -- Hover effect
            BindButton.MouseEnter:Connect(function()
                TweenService:Create(BindButton, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
            end)
            
            BindButton.MouseLeave:Connect(function()
                TweenService:Create(BindButton, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                }):Play()
            end)
            
            -- Set initial bind
            BindObject:Set(CurrentBind)
            
            return BindObject
        end
        
        function Tab:AddColorpicker(config)
            -- Validate config is a table
            assert(type(config) == "table", "AddColorpicker requires a configuration table")
            
            -- Extract configuration
            local name = config.Name or "Colorpicker"
            local default = config.Default or Color3.fromRGB(255, 0, 0)
            local callback = config.Callback or function() end
            
            -- Create colorpicker elements
            local ColorpickerFrame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local ColorButton = Instance.new("TextButton")
            local ColorDisplay = Instance.new("Frame")
            local PickerFrame = Instance.new("Frame")
            local ColorSpace = Instance.new("ImageButton")
            local Cursor = Instance.new("ImageLabel")
            local HueSlider = Instance.new("ImageButton")
            local HueCursor = Instance.new("ImageLabel")
            
            -- Setup main frame
            ColorpickerFrame.Name = name.."_Colorpicker"
            ColorpickerFrame.Size = UDim2.new(1, -20, 0, 35)
            ColorpickerFrame.BackgroundTransparency = 1
            
            -- Label
            Label.Name = "Label"
            Label.Size = UDim2.new(1, -60, 1, 0)
            Label.BackgroundTransparency = 1
            Label.Text = name
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 14
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = ColorpickerFrame
            
            -- Color display button
            ColorButton.Name = "ColorButton"
            ColorButton.Size = UDim2.new(0, 50, 0, 20)
            ColorButton.Position = UDim2.new(1, -50, 0.5, -10)
            ColorButton.BackgroundTransparency = 1
            ColorButton.Text = ""
            ColorButton.Parent = ColorpickerFrame
            
            -- Color display
            ColorDisplay.Name = "ColorDisplay"
            ColorDisplay.Size = UDim2.new(1, 0, 1, 0)
            ColorDisplay.BackgroundColor3 = default
            ColorDisplay.Parent = ColorButton
            ApplyCornerRadius(ColorDisplay, 4)
            
            -- Picker popup
            PickerFrame.Name = "PickerFrame"
            PickerFrame.Size = UDim2.new(0, 200, 0, 220)
            PickerFrame.Position = UDim2.new(1, -200, 1, 10)
            PickerFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
            PickerFrame.Visible = false
            PickerFrame.Parent = ColorpickerFrame
            ApplyCornerRadius(PickerFrame, 6)
            
            -- Color space
            ColorSpace.Name = "ColorSpace"
            ColorSpace.Size = UDim2.new(1, -20, 0, 150)
            ColorSpace.Position = UDim2.new(0, 10, 0, 10)
            ColorSpace.Image = "rbxassetid://4155801252"
            ColorSpace.BackgroundColor3 = Color3.new(1, 0, 0)
            ColorSpace.Parent = PickerFrame
            ApplyCornerRadius(ColorSpace, 4)
            
            -- Color cursor
            Cursor.Name = "Cursor"
            Cursor.Size = UDim2.new(0, 8, 0, 8)
            Cursor.BackgroundTransparency = 1
            Cursor.Image = "rbxassetid://5100115962"
            Cursor.Parent = ColorSpace
            
            -- Hue slider
            HueSlider.Name = "HueSlider"
            HueSlider.Size = UDim2.new(1, -20, 0, 20)
            HueSlider.Position = UDim2.new(0, 10, 1, -40)
            HueSlider.Image = "rbxassetid://3641079629"
            HueSlider.Parent = PickerFrame
            ApplyCornerRadius(HueSlider, 4)
            
            -- Hue cursor
            HueCursor.Name = "HueCursor"
            HueCursor.Size = UDim2.new(0, 4, 1, 0)
            HueCursor.BackgroundColor3 = Color3.new(1, 1, 1)
            HueCursor.Parent = HueSlider
            ApplyCornerRadius(HueCursor, 2)
            
            -- Create colorpicker object
            local ColorPicker = {}
            local Dragging = false
            local DraggingHue = false
            local SelectedColor = default
            local H, S, V = Color3.toHSV(default)
            
            -- Set method for the ColorPicker
            function ColorPicker:Set(color)
                -- Validate input is a Color3
                assert(typeof(color) == "Color3", "ColorPicker:Set() requires a Color3 value")
                
                -- Update the stored color
                SelectedColor = color
                H, S, V = Color3.toHSV(color)
                
                -- Update visual elements
                ColorDisplay.BackgroundColor3 = color
                ColorSpace.BackgroundColor3 = Color3.fromHSV(H, 1, 1)
                
                -- Update cursors
                Cursor.Position = UDim2.new(S, -4, 1 - V, -4)
                HueCursor.Position = UDim2.new(H, -2, 0, 0)
                
                -- Call the callback with the new color
                callback(color)
                
                return color
            end
            
            -- Color space interaction
            ColorSpace.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    Dragging = true
                end
            end)
            
            ColorSpace.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    Dragging = false
                end
            end)
            
            -- Hue slider interaction
            HueSlider.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    DraggingHue = true
                end
            end)
            
            HueSlider.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 then
                    DraggingHue = false
                end
            end)
            
            -- Update color based on input
            game:GetService("UserInputService").InputChanged:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseMovement then
                    if Dragging then
                        local ColorSpaceAbsolute = ColorSpace.AbsolutePosition
                        local ColorSpaceAbsoluteSize = ColorSpace.AbsoluteSize
                        
                        local X = math.clamp((input.Position.X - ColorSpaceAbsolute.X) / ColorSpaceAbsoluteSize.X, 0, 1)
                        local Y = math.clamp((input.Position.Y - ColorSpaceAbsolute.Y) / ColorSpaceAbsoluteSize.Y, 0, 1)
                        
                        S = X
                        V = 1 - Y
                        
                        Cursor.Position = UDim2.new(X, -4, Y, -4)
                        ColorPicker:Set(Color3.fromHSV(H, S, V))
                    elseif DraggingHue then
                        local HueAbsolute = HueSlider.AbsolutePosition
                        local HueAbsoluteSize = HueSlider.AbsoluteSize
                        
                        H = math.clamp((input.Position.X - HueAbsolute.X) / HueAbsoluteSize.X, 0, 1)
                        HueCursor.Position = UDim2.new(H, -2, 0, 0)
                        ColorSpace.BackgroundColor3 = Color3.fromHSV(H, 1, 1)
                        ColorPicker:Set(Color3.fromHSV(H, S, V))
                    end
                end
            end)
            
            -- Toggle picker visibility
            ColorButton.MouseButton1Click:Connect(function()
                PickerFrame.Visible = not PickerFrame.Visible
            end)
            
            -- Set initial color
            ColorPicker:Set(default)
            
            return ColorPicker
        end
        
        function Tab:AddLabel(text)
            -- Validate input is a string
            assert(type(text) == "string", "AddLabel requires a string value")
            
            -- Create label elements
            local LabelFrame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            
            -- Setup main frame
            LabelFrame.Name = "Label_Frame"
            LabelFrame.Size = UDim2.new(1, -20, 0, 25)
            LabelFrame.BackgroundTransparency = 1
            
            -- Setup label
            Label.Name = "Label"
            Label.Size = UDim2.new(1, 0, 1, 0)
            Label.BackgroundTransparency = 1
            Label.Text = text
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 14
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = LabelFrame
            
            -- Create label object with Set method
            local LabelObject = {}
            
            function LabelObject:Set(newText)
                -- Validate new text is a string or can be converted to string
                assert(newText ~= nil, "Label:Set() requires a value")
                Label.Text = tostring(newText)
            end
            
            return LabelObject
        end
        
        function Tab:AddParagraph(title, content)
            -- Validate inputs
            assert(type(title) == "string", "AddParagraph title must be a string")
            assert(type(content) == "string", "AddParagraph content must be a string")
            
            -- Create paragraph elements
            local ParagraphFrame = Instance.new("Frame")
            local Title = Instance.new("TextLabel")
            local Content = Instance.new("TextLabel")
            
            -- Setup main frame
            ParagraphFrame.Name = "Paragraph_Frame"
            ParagraphFrame.Size = UDim2.new(1, -20, 0, 0) -- Will auto-size based on content
            ParagraphFrame.BackgroundTransparency = 1
            
            -- Setup title
            Title.Name = "Title"
            Title.Size = UDim2.new(1, 0, 0, 20)
            Title.BackgroundTransparency = 1
            Title.Text = title
            Title.TextColor3 = Color3.fromRGB(255, 255, 255)
            Title.TextSize = 14
            Title.Font = Enum.Font.GothamBold
            Title.TextXAlignment = Enum.TextXAlignment.Left
            Title.Parent = ParagraphFrame
            
            -- Setup content
            Content.Name = "Content"
            Content.Size = UDim2.new(1, 0, 0, 0) -- Will auto-size
            Content.Position = UDim2.new(0, 0, 0, 25)
            Content.BackgroundTransparency = 1
            Content.Text = content
            Content.TextColor3 = Color3.fromRGB(200, 200, 200)
            Content.TextSize = 13
            Content.Font = Enum.Font.Gotham
            Content.TextXAlignment = Enum.TextXAlignment.Left
            Content.TextYAlignment = Enum.TextYAlignment.Top
            Content.TextWrapped = true
            Content.Parent = ParagraphFrame
            
            -- Create paragraph object
            local ParagraphObject = {}
            
            -- Function to update frame size based on content
            local function UpdateSize()
                local textHeight = game:GetService("TextService"):GetTextSize(
                    Content.Text,
                    Content.TextSize,
                    Content.Font,
                    Vector2.new(Content.AbsoluteSize.X, math.huge)
                ).Y
                
                Content.Size = UDim2.new(1, 0, 0, textHeight)
                ParagraphFrame.Size = UDim2.new(1, -20, 0, textHeight + 30)
            end
            
            -- Set method for the paragraph
            function ParagraphObject:Set(newTitle, newContent)
                -- Validate inputs aren't nil
                assert(newTitle ~= nil, "Paragraph:Set() requires a title")
                assert(newContent ~= nil, "Paragraph:Set() requires content")
                
                -- Update title
                Title.Text = tostring(newTitle)
                
                -- Update content
                Content.Text = tostring(newContent)
                
                -- Update size to fit new content
                UpdateSize()
            end
            
            -- Initial size update
            task.defer(UpdateSize)
            
            return ParagraphObject
        end
        
        function Tab:AddTextbox(config)
            -- Validate config is a table
            assert(type(config) == "table", "AddTextbox requires a configuration table")
            
            -- Extract configuration
            local name = config.Name or "Textbox"
            local default = config.Default or ""
            local textDisappear = config.TextDisappear or false
            local callback = config.Callback or function() end
            
            -- Create textbox elements
            local TextboxFrame = Instance.new("Frame")
            local Label = Instance.new("TextLabel")
            local TextboxContainer = Instance.new("Frame")
            local Textbox = Instance.new("TextBox")
            
            -- Setup main frame
            TextboxFrame.Name = name.."_Textbox"
            TextboxFrame.Size = UDim2.new(1, -20, 0, 50)
            TextboxFrame.BackgroundTransparency = 1
            
            -- Setup label
            Label.Name = "Label"
            Label.Size = UDim2.new(1, 0, 0, 20)
            Label.BackgroundTransparency = 1
            Label.Text = name
            Label.TextColor3 = Color3.fromRGB(255, 255, 255)
            Label.TextSize = 14
            Label.Font = Enum.Font.Gotham
            Label.TextXAlignment = Enum.TextXAlignment.Left
            Label.Parent = TextboxFrame
            
            -- Setup textbox container
            TextboxContainer.Name = "Container"
            TextboxContainer.Size = UDim2.new(1, 0, 0, 25)
            TextboxContainer.Position = UDim2.new(0, 0, 0, 25)
            TextboxContainer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
            TextboxContainer.Parent = TextboxFrame
            ApplyCornerRadius(TextboxContainer, 4)
            
            -- Setup textbox
            Textbox.Name = "Input"
            Textbox.Size = UDim2.new(1, -10, 1, 0)
            Textbox.Position = UDim2.new(0, 5, 0, 0)
            Textbox.BackgroundTransparency = 1
            Textbox.Text = default
            Textbox.PlaceholderText = "Enter text..."
            Textbox.TextColor3 = Color3.fromRGB(255, 255, 255)
            Textbox.PlaceholderColor3 = Color3.fromRGB(180, 180, 180)
            Textbox.TextSize = 14
            Textbox.Font = Enum.Font.Gotham
            Textbox.TextXAlignment = Enum.TextXAlignment.Left
            Textbox.ClearTextOnFocus = textDisappear
            Textbox.Parent = TextboxContainer
            
            -- Create textbox object
            local TextboxObject = {}
            
            -- Set method for the textbox
            function TextboxObject:Set(value)
                Textbox.Text = tostring(value)
                callback(Textbox.Text)
            end
            
            -- Connect textbox events
            Textbox.FocusLost:Connect(function(enterPressed)
                callback(Textbox.Text)
                
                if textDisappear then
                    Textbox.Text = ""
                end
            end)
            
            -- Hover effect
            TextboxContainer.MouseEnter:Connect(function()
                TweenService:Create(TextboxContainer, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(50, 50, 50)
                }):Play()
            end)
            
            TextboxContainer.MouseLeave:Connect(function()
                TweenService:Create(TextboxContainer, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(40, 40, 40)
                }):Play()
            end)
            
            return TextboxObject
        end
        
        table.insert(tabs, Tab)
        return Tab
    end
    
    -- Handle config saving if enabled
    if saveConfig then
        -- Create config folder if it doesn't exist
        if not isfolder(configFolder) then
            makefolder(configFolder)
        end
        
        -- Add save/load config methods
        function Window:SaveConfig(name)
            local config = {}
            -- Add logic to save current UI state
            writefile(configFolder.."/"..name..".json", game:GetService("HttpService"):JSONEncode(config))
        end
        
        function Window:LoadConfig(name)
            if isfile(configFolder.."/"..name..".json") then
                local config = game:GetService("HttpService"):JSONDecode(readfile(configFolder.."/"..name..".json"))
                -- Add logic to load UI state from config
            end
        end
    end

    return Window
end

-- Remove the old CreateWindow function or make it an alias
UILib.CreateWindow = UILib.MakeWindow

function UILib:Init()
    -- Save initial mouse position
    local mouse = game:GetService("Players").LocalPlayer:GetMouse()
    local initialMousePos = Vector2.new(mouse.X, mouse.Y)
    
    -- Create initialization effect
    local InitFrame = Instance.new("Frame")
    InitFrame.Size = UDim2.new(1, 0, 1, 0)
    InitFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    InitFrame.BackgroundTransparency = 1
    InitFrame.Parent = self.MainGui
    
    -- Fade in
    TweenService:Create(InitFrame, TweenInfo.new(0.5), {
        BackgroundTransparency = 0
    }):Play()
    
    -- Wait a moment
    task.wait(0.5)
    
    -- Create logo or text (optional)
    local Logo = Instance.new("TextLabel")
    Logo.Size = UDim2.new(0, 200, 0, 50)
    Logo.Position = UDim2.new(0.5, -100, 0.5, -25)
    Logo.BackgroundTransparency = 1
    Logo.Text = "AxionLib"
    Logo.TextColor3 = Color3.fromRGB(255, 255, 255)
    Logo.TextSize = 28
    Logo.Font = Enum.Font.GothamBold
    Logo.Parent = InitFrame
    Logo.TextTransparency = 1
    
    -- Fade in logo
    TweenService:Create(Logo, TweenInfo.new(0.5), {
        TextTransparency = 0
    }):Play()
    
    -- Wait another moment
    task.wait(1)
    
    -- Fade out logo
    TweenService:Create(Logo, TweenInfo.new(0.5), {
        TextTransparency = 1
    }):Play()
    
    -- Fade out init frame
    local fadeOut = TweenService:Create(InitFrame, TweenInfo.new(0.5), {
        BackgroundTransparency = 1
    })
    
    fadeOut.Completed:Connect(function()
        InitFrame:Destroy()
    end)
    
    fadeOut:Play()
    
    -- Show main UI
    self.MainGui.Enabled = true
    
    -- Add closing with right click
    game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
        if input.UserInputType == Enum.UserInputType.MouseButton2 then
            self.MainGui.Enabled = not self.MainGui.Enabled
        end
    end)
    
    -- Return the library for chaining
    return self
end

-- Add config saving/loading functions
function UILib:SaveConfiguration()
    if not self.SaveConfig then return end
    
    local config = {}
    
    -- Collect all flagged elements
    for flag, object in pairs(self.Flags) do
        if object.Save then
            config[flag] = {
                Type = object.Type,
                Value = object.Value
            }
        end
    end
    
    -- Save to file
    local gameId = game.GameId
    local configPath = self.ConfigFolder .. "/" .. gameId .. ".json"
    writefile(configPath, game:GetService("HttpService"):JSONEncode(config))
end

function UILib:LoadConfiguration()
    if not self.SaveConfig then return end
    
    local gameId = game.GameId
    local configPath = self.ConfigFolder .. "/" .. gameId .. ".json"
    
    if isfile(configPath) then
        local config = game:GetService("HttpService"):JSONDecode(readfile(configPath))
        
        -- Apply saved values to flagged elements
        for flag, data in pairs(config) do
            if self.Flags[flag] and self.Flags[flag].Set then
                self.Flags[flag]:Set(data.Value)
            end
        end
    end
end

function UILib:Destroy()
    -- Save config if enabled
    if self.SaveConfig then
        self:SaveConfiguration()
    end
    
    -- Disconnect all connections
    for _, connection in pairs(self.Connections or {}) do
        connection:Disconnect()
    end
    
    -- Clear all flags
    table.clear(self.Flags)
    
    -- Create fade out effect
    local DestroyFrame = Instance.new("Frame")
    DestroyFrame.Size = UDim2.new(1, 0, 1, 0)
    DestroyFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    DestroyFrame.BackgroundTransparency = 1
    DestroyFrame.Parent = self.MainGui
    
    -- Fade in black screen
    TweenService:Create(DestroyFrame, TweenInfo.new(0.5), {
        BackgroundTransparency = 0
    }):Play()
    
    -- Wait for fade
    task.wait(0.5)
    
    -- Destroy all UI elements
    self.MainGui:Destroy()
    
    -- Clear the library table
    for k, v in pairs(self) do
        self[k] = nil
    end
    
    -- Add destroyed flag
    self.Destroyed = true
end

function UILib:AddTextbox(config)
    config = config or {}
    config.Name = config.Name or "Textbox"
    config.Default = config.Default or ""
    config.TextDisappear = config.TextDisappear or false
    config.Callback = config.Callback or function() end

    local TextboxFrame = Create("Frame", {
        BackgroundColor3 = Color3.fromRGB(25, 25, 25),
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 32)
    })

    local TextBox = Create("TextBox", {
        Parent = TextboxFrame,
        BackgroundTransparency = 1,
        Size = UDim2.new(1, 0, 1, 0),
        Text = config.Default,
        PlaceholderText = config.Name,
        TextColor3 = Color3.fromRGB(255, 255, 255),
        TextSize = 14,
        Font = Enum.Font.GothamSemibold
    })

    TextBox.FocusLost:Connect(function(enterPressed)
        if enterPressed or not config.TextDisappear then
            config.Callback(TextBox.Text)
        end
        if config.TextDisappear then
            TextBox.Text = ""
        end
    end)

    return TextboxFrame
end

return UILib
